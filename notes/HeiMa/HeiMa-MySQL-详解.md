# 基础



# 进阶

## 事务

### 简介

事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销，即这些操作**要么同时成功，要么同时失败**。



### 操作

mysql提供了两种事务提交的控制方法：**设置提交方式**、**开启事务方式**。

1、在mysql操作中可以**设置事务的提交方式**来控制事务。

可以通过命令查看事务提交方式：

```mysql
-- 查看事务提交方式
select @@autocommit;

-- 设置事务为非自动提交方式 [1为默认值，自动提交。0为非自动提交]
set @@autoccommit=0;
```

提交事务命令：

```mysql
COMMIT;
```

回滚事务命令：

```mysql
ROLLBACK;
```

2、或者通过**开启事务**的方式来控制事务。

开启事务命令：

```mysql
-- 开启事务
start transaction;

-- 提交事务[设置为若事务中命令都正确执行，未出错，就提交]
commit;

-- 事务回滚[设置未若事务中命令出现错误，回滚]
rollback;
```



### 四大特性

事务理论上应该具有的四大特性：**原子性**（Atomicity）、**一致性**（Consistency）、**隔离性**（Isolation）、**持久性**（Durability）。

**原子性**指的是事务中的操作被看作一个整体，是不可分割的，具有原子性，要么都成功，要么都失败。

**一致性**指的是事务中的操作执行完毕后，数据库中的数据仍然保持逻辑上的一致性，不会出现逻辑不通的问题。

**隔离性**指的是多个事务之间不会缠绕，互相影响。

**持久性**指的是事务操作的结果是永久性的，会保存在磁盘上。



### 并发事务问题

事务虽然理论上具有隔离性，但是也取决于事务的隔离级别。并且事务支持的原子性只是逻辑上的原子性，并不是物理意义上的原子性，因此仍可能会存在一些常见并发问题。因此事务并发可能会出现以下问题：**脏读**、**不可重复读**、**幻读**。

| 问题 | 描述 |
| :--: | :--: |
|      |      |
|      |      |
|      |      |



# 运维