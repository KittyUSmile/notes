
# 模块化

> ES6模块化的出现主要是为了统一市面上各式各样的模块化方案，降低前端开发者的模块化学习成本，让开发者不必再去额外学习AMD、CMD或CommonJS等模块化规范。

ES6模块化规范中定义：
1. 每个 js 文件都是一个独立的模块
2. 导入其他模块成员使用 import 关键字![[]]
3. 向外共享模块化成员使用 export 关键字

## 导出

> 将成员共享出去，允许其它模块通过导入使用。模块的导出分为默认导出和按需导出。

### 默认导出

> 默认导出语法为：export default { 默认导出的成员 } ；需要注意，在一个模块中，只能使用一次默认导出。

其它模块可以通过导入该模块获取到默认导出的变量或对象。

```js
let n1 = 10 //定义模块私有成员n1
let n2 = 20 // 定义模块私有成员n2(外界访问不到，因为它没有共享出去)
function show(){} // 定义模块私有方法show

export default{ // 使用 export default 默认导出语法, 向外共享n1和show两个成员
	n1, 
	show,
}
```

### 按需导出

> 根据需要导出模块成员，格式为：export 需要导出的成员；按需导出可以多次使用。

```js
//向外导出变量s1
export let s1 = 'aaa'
//向外导出变量s1
export let s2 = 'bbb'
//向外导出方法say
export function say() { }
```


## 导入

> 在本模块中导入其它模块的成员，导入分为默认导入和按需导入。

### 默认导入

> 默认导入的语法是：import 接收名称 from '模块标识符'；默认导入时接收名称只要遵循变量命名规范即可。

可以通过默认导入的方式导入其它模块中默认导出的变量或对象。

```js
// 从该模块中导入其export default的成员,并使用e1接收 
import e1 from './export_demo1.js';

//打印输出结果为:{ n1: 10, show: [Function: show] }
console.log(e1);
```

### 按需导入

> 指定导入其它模块中导出的成员，格式为：import { 导入名1, 导入名2 } from '模块标识符'；按需导入的导入名称必须和导出名称一致，如果有修改名字需求，可以通过 as 进行修改。

```js
// 按需导入时使用 {} 把要导入的变量加进去, 需要注意的是, 导入名必须和导出名相同
import { s1 as a1, s2, say } from './export_demo2.js'

//运行结果: aaa bbb [Function: say]
console.log(a1, s2, say);
```


> [!NOTE] tips: 默认导入和按需导入一起使用，它们之间用逗号隔开即可，格式为：
> import e1, { s1, s2, say } from './export_demo2.js'

### 直接导入执行

> 当需要导入的模块中没有导出，只有一些需要被执行的代码，就可以通过直接导入的方式导入该模块并自动执行模块中的代码。

导出模块：
```js
for (let i = 0; i < 3; i++) {
  console.log(i);
}
```

导入模块：
```js
// 直接导入并执行模块代码，不需要得到模块向外共享的成员
// 结果: 0 1 2
import './export_demo3.js'
```

# 问题及解决

## 如何在 node.js 中体验 ES6 模块化

node.js 中默认支持的是 CommonJS 模块化规范，如果想基于 node.js 体验和学习 ES6 的模块化语法，可以按照以下两个步骤进行配置：
1. 确保安装了 v14.15.1 或更高版本的 node.js
2. 在通过 npm init -y 命令生成的 package.json 文件中加上：
```json
{
	"type": "module"
	...
}
```
